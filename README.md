# Реферат по дисциплине «Администрирование информационных систем»: Технология ORM: сравнительный анализ подходов Active Record (Django ORM) и Data Mapper (SQLAlchemy).»

## Оглавление

[Введение](#введение)

[1. Основная часть](#1-основная-часть)

[1.1 ORM и его основные принципы](#11-orm-и-его-основные-принципы)

[1.2 Кратко о django-orm-и-sqlalchemy](#12-кратко-о-django-orm-и-sqlalchemy)

[1.3 Сравнение двух технологий](#13-сравнение-двух-технологий)

[1.3.1 Скорость разработки](#131-скорость-разработки)

[1.3.2 Удобство-и-читаемость-кода](#132-удобство-и-читаемость-кода)

[1.3.3 Гибкость-и-контроль](#133-гибкость-и-контроль)

[1.3.4 Производительность](#134-производительность)

[1.3.5 Независимость-от-базы-данных](#135-независимость-от-базы-данных)

[1.3.6 Интеграция-с-веб-фреймворками](#136-интеграция-с-веб-фреймворками)

[1.3.7 Безопасность](#137-безопасность)

[1.4 Итоговые различия и рекомендации](#14-итоговые-различия-и-рекомендации)

[1.5 Заключение](#15-заключение)

## Введение

В современном веб-разработке взаимодействие с базами данных является критически важным аспектом. С ростом сложности приложений возникла необходимость в абстракции работы с базами данных. ORM (Object-Relational Mapping) стала решением этой проблемы, предоставляя разработчикам удобный способ работы с данными в объектно-ориентированном стиле.

Актуальность темы обусловлена растущей потребностью в эффективных инструментах для работы с базами данных в современных приложениях. Выбор правильной ORM-библиотеки может существенно повлиять на производительность, масштабируемость и поддерживаемость проекта.

Цель работы — провести сравнительный анализ двух популярных подходов к реализации ORM: Active Record (на примере Django ORM) и Data Mapper (на примере SQLAlchemy).


## 1. ОСНОВНАЯ ЧАСТЬ

### 1.1	  ORM и его основные принципы

ORM (Object-Relational Mapping) — технология, которая позволяет разработчикам работать с реляционными базами данных (БД) через объекты языков программирования. Она создаёт «мост» между объектно-ориентированными языками программирования (например, Java, Python или C#) и реляционными базами данных (СУБД типа MySQL, PostgreSQL или Oracle).

Основная его цель — упрощение взаимодействия с БД. В ситуации, когда необходимо извлечь данные из нескольких связанных таблиц и преобразовать их в объекты вашей программы, без ORM пришлось бы писать множество запросов на SQL, вручную обрабатывать результаты и создавать соответствующие объекты. ORM эту задачу существенно упрощает.

Также, технология позволяет снизить зависимость от конкретной СУБД. Если вы решите сменить БД, изменения коснутся лишь конфигурации ORM, а основной код останется неизменным.

Технология также имеет и свои недостатки:

Производительность – иногда применение ORM ведёт к снижению производительности — генерируемые запросы могут быть не такими оптимальными, как написанные вручную.
Ограниченная гибкость – некоторые специфические запросы или особенности конкретной БД могут оказаться недоступными через стандартный интерфейс ORM.


### 1.2 	Кратко о Django ORM и SQLAlchemy

Django ORM является неотъемлемой частью веб-фреймворка Django, обеспечивая удобство разработки. Он основан на паттерне Active Record, где каждая модель Django представляет собой таблицу базы данных, а экземпляры моделей сопоставляются со строками таблицы. Такая тесная интеграция делает Django ORM удобным для разработчиков, особенно для тех, кто уже знаком с Django.

SQLAlchemy, с другой стороны, представляет собой автономную библиотеку ORM. Она использует паттерн Data Mapper, в котором классы Python сопоставляются с таблицами базы данных, но конфигурация сопоставления более явная. Такая гибкость позволяет разработчикам работать со сложными взаимодействиями с базой данных и интегрироваться с различными веб-фреймворками, а не только с Django.


### 1.3 	Сравнение двух технологий

### 1.3.1 	Скорость разработки

**Django ORM**: автоматическая генерация схемы с помощью миграций и встроенного интерфейса администратора значительно сокращает объём шаблонного кода.

Миграции: Django предоставляет фреймворк для управления изменениями в схеме базы данных. Вы определяете изменения в коде Python, а Django автоматически генерирует необходимые SQL-запросы для их применения в вашей базе данных. Это упрощает изменение схемы и снижает риск ошибок по сравнению с ручным управлением SQL-скриптами.

Интерфейс администратора: Одной из ключевых особенностей Django ORM является глубокая интеграция с интерфейсом администратора Django. Это удобный веб-интерфейс, с помощью которого разработчики могут выполнять операции CRUD в таблицах своей базы данных. Это экономит время, поскольку не нужно создавать отдельные панели для управления.

**SQLAlchemy**: требуется дополнительная настройка, что может замедлить процесс разработки на начальном этапе. Однако в потенциально, это позволяет лучше адаптировать систему под будущие нужды.

Существующая схема базы данных: возможно определить свои модели для сопоставления с существующими таблицами, используя гибкость шаблона Data Mapper. В таких случаях Django ORM с его подходом на основе активных записей может потребовать больше усилий.

Настраиваемый интерфейс администратора: хотя в SQLAlchemy нет встроенного интерфейса администратора, его можно интегрировать со сторонними библиотеками, такими как Flask-Admin или WTForms-Admin, что позволяет настраивать его в соответствии с требованиями, особенно в сложных проектах, где стандартных функций может быть недостаточно.

### 1.3.2 	Удобство и читаемость кода

**Django ORM**: предлагает чистый синтаксис с декларативными связями, использующими такие поля, как ForeignKey и ManyToManyField. Это повышает читаемость и удобство сопровождения кода:

Декларативные связи: Django ORM позволяет определять связи между моделями непосредственно в классах моделей. Это делает код более лаконичным и понятным, особенно для разработчиков, знакомых с моделями Django.

Автоматическое сопоставление полей: Django определяет типы полей базы данных на основе объявлений полей теукщей модели (например, IntegerField, CharField). Это снижает потребность в явном сопоставлении типов полей и упрощает код.

**SQLAlchemy**: более подробная конфигурация может повлиять на читаемость, особенно при сложных сопоставлениях. Однако она обеспечивает больший контроль.

Явное сопоставление: SQLAlchemy требует явного определения того, как классы Python сопоставляются с таблицами базы данных. Это может привести к тому, что код станет более многословным по сравнению с декларативным подходом Django ORM. Однако это также даёт больше возможностей для управления деталями сопоставления.

Настраиваемые типы полей: SQLAlchemy позволяет определять настраиваемые типы полей в соответствии с требованиями к данным. Такая гибкость полезна при работе со сложными структурами данных.


### 1.3.3 	Гибкость и контроль

**Django ORM**: обеспечивает хороший баланс, но может ограничивать возможности при сложных взаимодействиях или использовании существующих схем:

Паттерн проектирования «Active Record»: Подход Django ORM к активной записи тесно связывает модели и таблицы базы данных. Это упрощает разработку, но может ограничивать гибкость при выполнении сложных запросов или в сценариях, где требуется взаимодействие с базой данных на более низком уровне.

Ограниченное использование необработанного SQL: хотя Django ORM допускает периодическое использование необработанного SQL, обычно это не рекомендуется из-за возможного дублирования кода и снижения удобства сопровождения.

**SQLAlchemy**: отличается гибкостью благодаря паттерну Data Mapper:

Конфигурация объектно-реляционного отображения: SQLAlchemy обеспечивает детальный контроль над тем, как объекты Python сопоставляются с таблицами базы данных. Возможно определение собственных сопоставления, стратегии наследования и другие расширенные функции.

Широкие возможности запросов: SQLAlchemy предлагает мощный механизм для создания сложных SQL-запросов. Использование таких функций, как фильтрация, агрегирование, объединения, и вложенные запросы, значительно упрощается что позволяет эффективнее решать сложные задачи по извлечению данных.


### 1.3.4 	Производительность

**Django ORM**: использование абстракций может привести к незначительному снижению производительности по сравнению с обычным SQL, особенно при выполнении сложных запросов.

Автоматическая генерация запросов: Django ORM преобразует операции с моделями в SQL-запросы. Эта абстракция упрощает разработку, но может привести к снижению производительности по сравнению с написанием необработанных SQL-запросов вручную.

**SQLAlchemy**: позволяет оптимизировать производительность за счёт контроля над выполнением запросов:

Доступ к низкоуровневым функциям: SQLAlchemy позволяет получить доступ к базовому соединению с базой данных и напрямую выполнять необработанные SQL-запросы. Это обеспечивает более точный контроль над выполнением запросов и открывает возможности для оптимизации, особенно для операций, критичных к производительности.

Кэширование на уровне объектов: SQLAlchemy поддерживает кэширование на уровне объектов, что позволяет кэшировать часто используемые объекты базы данных в памяти. Это может значительно повысить производительность приложений с интенсивным чтением.


### 1.3.5 	Независимость от базы данных

**Django ORM**: в первую очередь предназначен для PostgreSQL, MySQL, и SQLite. Поддерживает другие системы с дополнительной настройкой:

Адаптеры бэкенда: Django предоставляет адаптеры бэкенда для различных баз данных. Однако эти адаптеры не всегда обеспечивают такой же уровень функциональности и производительности, как нативная поддержка.

**SQLAlchemy**: не зависит от базы данных и поддерживает их широкий спектр:

Диалекты: SQLAlchemy использует диалекты для работы с особым синтаксисом и функциями различных систем управления базами данных. Это обеспечивает совместимость с широким спектром баз данных без ущерба для производительности или функциональности.


### 1.3.6 	Интеграция с веб-фреймворками

**Django ORM**: безшовная интеграция с Django делает его естественным выбором для проектов на Django:

Встроенная интеграция: Django ORM — неотъемлемая часть фреймворка Django. Такая тесная интеграция упрощает разработку и обеспечивает совместимость ваших моделей с экосистемой Django. С дополнительными библиотеками возможно интеграция и с другими.

**SQLAlchemy**: Независим от фреймворка, но требует настройки.

Адаптивная интеграция: SQLAlchemy можно использовать с Django или другими веб-фреймворками, такими как Flask или Pyramid. Его также можно использовать в автономных проектах без веб-фреймворка. Хотя интеграция может потребовать дополнительной настройки, она обеспечивает большую гибкость для различных типов проектов.

	
### 1.3.7 	Безопасность

**Django ORM**: использует встроенные функции безопасности Django, что потенциально повышает уровень безопасности:

Система разрешений: Платформа оснащена системой разрешений, которая позволяет администраторам контролировать действия пользователей в определенных частях приложений или даже во всей системе в целом. Это обеспечивает более высокий уровень безопасности данных, хранящихся в этих средах, и предотвращает несанкционированный доступ к конфиденциальной информации об организациях/лицах, участвующих в проекте

Защита от SQL-инъекций: ещё одним важным аспектом Django ORM является защита от атак с использованием SQL-инъекций которая заключается в проверке пользовательского ввода перед его непосредственным использованием в запросах, отправляемых в базовые базы данных, что предотвращает выполнение вредоносного кода.

**SQLAlchemy**: для доступа к БД требуются отдельные меры безопасности:

Ручная параметризация: В самой SQLAlchemy нет встроенных функций безопасности, таких как права доступа для пользователей или защита от SQL-инъекций. Необходимо реализовать эти меры вручную, используя такие методы, как параметризация запросов к базе данных.


### 1.4 	Итоговые различия и рекомендации

Таблица отличий Django ORM и SQLAlchemy

| Аспект                      | Django ORM                                                                 | SQLAlchemy                                                                                     |
|-----------------------------|-----------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|
| Скорость разработки         | Быстрая настройка, автоматическая схема, встроенный администратор         | Более медленная первоначальная настройка, лучше подходит для существующих схем, настраиваемый администратор с помощью сторонних библиотек |
| Читаемость кода             | Чистый синтаксис, декларативные связи                                     | Подробное, явное сопоставление, настраиваемые типы полей                                       |
| Гибкость и контроль         | Сбалансированный подход, который может быть ограничен в сложных случаях   | Высокая гибкость, детальный контроль, расширенные возможности запросов                         |
| Производительность          | Незначительные накладные расходы, автоматическая генерация запросов       | Оптимизация, прямой контроль над запросами, кэширование на уровне объектов                      |
| Независимость от БД         | PostgreSQL, MySQL, SQLite и другие с возможностью настройки               | Поддерживает широкий спектр баз данных с определёнными диалектами                              |
| Интеграция с фреймворками   | Бесшовный, но только для Django                                           | Независимость от фреймворка, адаптация к различным фреймворкам                                 |
| Безопасность                | Встроенные функции безопасности, разрешения, защита от SQL-инъекций       | Требуются ручные меры безопасности, параметризация для защиты от SQL-инъекций                  |


Выбирать стоит Django ORM, если:
- Создаётся новое веб-приложение на Django.
- Идёт предпочтение быстрой разработке и читабельности кода.
- Отсутствуют сложные требования к базе данных.

Выбирать стоит SQLAlchemy, если:
- Необходима максимальная гибкость для сложных взаимодействий с базой данных.
- Работа идёт с существующей схемой базы данных.
- Требуется детальная оптимизация производительности.
- Используется веб-фреймворк, отличный от Django, или создаётся отдельный проект.


## 1.5 	Заключение

В заключение стоит отметить, что Django ORM и SQLAlchemy — это мощные объектно-реляционные преобразователи для разработчиков на Python. Django ORM отличается высокой скоростью разработки и удобством использования в рамках экосистемы Django, в то время как SQLAlchemy обеспечивает беспрецедентную гибкость и контроль над сложными проектами. В конечном счёте оптимальный выбор зависит от конкретных требований вашего проекта.